<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>

    <script>
        let btn = document.querySelector("#fade-btn")
        let div = document.querySelector("#fade-obj")
        let timeId
        let value = 1
        let flag = false
        btn.addEventListener("click", function(){
            let count = 0
            btn.disable = true
            if(flag===false) {
                timeId = setInterval(() => {
                    count += 50
                    value -= 0.02
                    console.log(count)
                    div.style.backgroundColor = "rgba(0,0,0," + value + ")"
                    if (count === 3000 || value === 0) {
                        btn.innerText = "淡入"
                        flag = !flag
                        clearInterval(timeId)
                    }
                }, 50);

            } else {
                timeId = setInterval(() => {
                    count += 50
                    value += 0.02
                    console.log(count)
                    div.style.backgroundColor = "rgba(0,0,0," + value + ")"
                    if (count === 3000 || value === 0) {
                        btn.innerText = "淡出"
                        flag = !flag
                        clearInterval(timeId)
                    }
                }, 50);
            }

            
            
        })
    </script>
</body>
</html>